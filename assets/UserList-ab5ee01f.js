import{d as x,o as a,c as o,a as t,t as k,l as $,_ as A,i as O,h,x as P,y as W,u as s,j as I,v as H,k as S,e as R,p as j,f as K,z as Y,A as Z,B as V,C as ee,b as U,w as E,D as te,F as M,r as z,m as se,g as B,E as F}from"./index-c5dc05cf.js";import{_ as q,u as D}from"./NoImage-f6516561.js";const ie={class:"search-item"},le={class:"search-item__row"},ae={class:"search-item__picture"},ne=["src","alt"],oe={key:1,src:q,alt:"No picture"},ce={class:"search-item__info"},re={class:"search-item__title"},me={key:0,class:"search-item__date"},de={key:1,class:"search-item__description"},ue={class:"search-item__add-btn"},_e=x({__name:"SearchListItem",props:{item:null},emits:["addItem"],setup(e,{emit:g}){return(i,u)=>(a(),o("div",ie,[t("div",le,[t("div",ae,[e.item.image?(a(),o("img",{key:0,src:e.item.image,alt:e.item.image},null,8,ne)):(a(),o("img",oe))]),t("div",ce,[t("div",re,k(e.item.title),1),e.item.creationDate?(a(),o("div",me," Дата выпуска - "+k(e.item.creationDate),1)):$("",!0),e.item.description?(a(),o("div",de,k(e.item.description),1)):$("",!0)]),t("div",ue,[t("button",{class:"btn",onClick:u[0]||(u[0]=c=>i.$emit("addItem",e.item))}," Добавить ")])])]))}});const ve=A(_e,[["__scopeId","data-v-ce2062a7"]]),he=e=>(j("data-v-d0c0f73d"),e=e(),K(),e),Ie={class:"list-item"},ke={class:"list-item__row"},ge={key:0},ye={key:1},fe={class:"list-item__arrows"},pe={class:"list-item__picture"},$e=["src","alt"],we={key:1,src:q,alt:"No picture"},Le={class:"list-item__info"},be={class:"list-item__name"},Se={key:0,class:"list-item__date"},Ce={key:1,class:"list-item__desc"},He={class:"list-item__all-actions"},Ne={class:"list-item__actions-list"},Ue={class:"list-item__comment"},xe={class:"list-item__create-comment"},Ae=he(()=>t("p",null," Ваш комментарий: ",-1)),De=x({__name:"UserListItem",props:{listItem:null,index:null,isLast:{type:Boolean}},emits:["deleteItem","swap","moveItem"],setup(e,{emit:g}){const i=e;O(()=>i.index,()=>{v.value=i.index+1});const u=D(),c=h(!1),v=h(i.index+1),y=()=>{c.value=!1,g("moveItem",v.value-1,i.index),u.saveListsInStorage()},p=P(()=>({gold:i.index===0,silver:i.index===1,cuprum:i.index===2}));return(f,l)=>(a(),o("div",Ie,[t("div",ke,[t("div",{class:W(["list-item__index",[s(p),c.value?"edit":""]])},[c.value?(a(),o("span",ye,[I(t("input",{"onUpdate:modelValue":l[0]||(l[0]=n=>v.value=n),type:"number"},null,512),[[H,v.value,void 0,{number:!0}]])])):(a(),o("span",ge,k(e.index+1),1))],2),t("div",fe,[e.index!=0?(a(),o("div",{key:0,onClick:l[1]||(l[1]=n=>f.$emit("swap","up",e.index)),class:"list-item__arrow icon-arrow-up"})):$("",!0),e.isLast?$("",!0):(a(),o("div",{key:1,class:"list-item__arrow icon-arrow-down",onClick:l[2]||(l[2]=n=>{f.$emit("swap","down",e.index)})}))]),t("div",pe,[e.listItem.image?(a(),o("img",{key:0,src:e.listItem.image,alt:e.listItem.image},null,8,$e)):(a(),o("img",we))]),t("div",Le,[t("div",be,k(e.listItem.title),1),e.listItem.creationDate?(a(),o("div",Se," Дата выпуска - "+k(e.listItem.creationDate),1)):$("",!0),e.listItem.description?(a(),o("div",Ce,k(e.listItem.description),1)):$("",!0)]),t("div",He,[t("ul",Ne,[t("li",null,[t("span",{class:"list-item__action icon-edit",onClick:l[3]||(l[3]=n=>c.value=!c.value)})]),t("li",null,[t("span",{class:"list-item__action icon-trash-can",onClick:l[4]||(l[4]=n=>f.$emit("deleteItem",e.index))})])])])]),I(t("div",Ue,[t("span",null,k(e.listItem.userComment),1)],512),[[S,e.listItem.userComment&&!c.value]]),I(t("div",xe,[Ae,R(),I(t("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=n=>e.listItem.userComment=n)},null,512),[[H,e.listItem.userComment]]),t("button",{class:"btn",onClick:y},"Сохранить")],512),[[S,c.value]])]))}});const Te=A(De,[["__scopeId","data-v-d0c0f73d"]]),Ve=e=>{var C;const i=h({placeholderHint:`Введите название ${{Фильмы:"фильма",Сериалы:"сериала",Игры:"игры",Актеры:"актера",Музыка:"трека",Коктейли:"Коктейля на английском","Серия сериала":"серии"}[(C=e.list)==null?void 0:C.category]}`,searchHint:""}),u=h(""),c=h([]),v=h("error"),y=h(!1),p=h(!1),f=h(!1),l=P(()=>{var L;let w=(L=e.list)==null?void 0:L.category,r={link:"",options:{}};switch(w){case"Фильмы":r.link="https://imdb-api.com/en/API/SearchMovie/k_8y8soghm/",i.value.placeholderHint="Введите название фильма",i.value.searchHint="Ищем фильм ";break;case"Сериалы":r.link="https://imdb-api.com/en/API/SearchSeries/k_8y8soghm/",i.value.placeholderHint="Введите название сериала",i.value.searchHint="Ищем сериал ";break;case"Серия сериала":r.link="https://imdb-api.com/en/API/SearchEpisode/k_8y8soghm/",i.value.placeholderHint="Введите название серии",i.value.searchHint="Ищем серию ";break;case"Музыка":r.link="https://deezerdevs-deezer.p.rapidapi.com/search?q=",r.options={method:"GET",headers:{"X-RapidAPI-Key":"9e3411aeb2msh6870cf46972558cp1475c4jsn93502557ec77","X-RapidAPI-Host":"deezerdevs-deezer.p.rapidapi.com"}};break;case"Игры":r.link="https://www.speedrun.com/api/v1/games?name=",i.value.placeholderHint="Введите название игры",i.value.searchHint="Ищем игру ";break;case"Актеры":r.link="https://imdb-api.com/en/API/SearchName/k_8y8soghm/",i.value.placeholderHint="Введите имя актера",i.value.searchHint="Ищем актера ";break;case"Коктейли":r.link="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=",i.value.placeholderHint="Введите название коктейля (на англ)",i.value.searchHint="Ищем коктейль ";break}return r}),n=async()=>{f.value=!0;try{let r=await(await fetch(l.value.link+u.value,l.value.options)).json();if(console.log(r),!r.errorMessage&&!r.error){const L=r.results||r.data||r.drinks||[];L.length&&(c.value=L.map(_=>{var b,N,m;return{id:_.id||_.idDrink,title:_.title||((b=_.names)==null?void 0:b.international)||_.strDrink,image:_.image||((N=_.assets)==null?void 0:N["cover-large"].uri)||((m=_.album)==null?void 0:m.cover)||_.strDrinkThumb,creationDate:_["release-date"],description:_.description,userComment:""}}))}else v.value=r.errorMessage||r.error,y.value=!0}catch(w){console.log(w),y.value=!0}finally{f.value=!1,p.value=!1}};return Y(w=>{if(c.value=[],u.value.length===0)return;p.value=!0,y.value=!1;let r=setTimeout(n,750);w(()=>{clearInterval(r)})}),{isSearching:f,searchQuery:u,searchItems:c,hintsForUser:i,errorMessage:v,isError:y,isTyping:p}},Ee=e=>{const g=D(),i=h(!1),u=h(e.name);return{goToAddInput:()=>{document.querySelector(".add-form").scrollIntoView({behavior:"smooth",block:"start"})},addItem:l=>{g.addItemToList(e.name,l)},swapItems:(l,n)=>{l==="up"?[e.list.listItems[n-1],e.list.listItems[n]]=[e.list.listItems[n],e.list.listItems[n-1]]:[e.list.listItems[n+1],e.list.listItems[n]]=[e.list.listItems[n],e.list.listItems[n+1]],g.saveListsInStorage()},updateListName:()=>{g.updateListName(e.name,u.value),i.value=!1,Z().push({name:"single-list",params:{name:u.value}})},moveItem:(l,n)=>{l<0||l>=e.list.listItems.length||(console.log(l,n),[e.list.listItems[l],e.list.listItems[n]]=[e.list.listItems[n],e.list.listItems[l]])},isNameEditing:i,newListName:u}},G=e=>(j("data-v-1752869f"),e=e(),K(),e),Me={class:"list"},ze={key:0,class:"list__body"},Be={class:"list__name"},Fe={class:"list__name-edit"},Pe={class:"list__current-name"},Re=G(()=>t("button",{class:"btn"},"Перейти к добавлению элементов",-1)),je=[Re],Ke={key:1,class:"list__list-items"},qe={key:2,class:"list__no-items"},Ge={class:"add-form__input"},Qe=["placeholder"],Xe={class:"add-form__search-elements search-elems"},Je={class:"search-elems__searching"},Oe={key:0,class:"search-elems__error"},We={key:1,class:"search-elems__all-elems"},Ye={key:2,class:"search-elems__no-items"},Ze={key:1,class:"list__no-list"},et=G(()=>t("p",null,"Не удалось найти список с таким названием :(",-1)),tt=x({__name:"UserList",props:{name:null,list:null},setup(e){const g=e,i=D(),{isSearching:u,searchQuery:c,searchItems:v,hintsForUser:y,isError:p,errorMessage:f,isTyping:l}=Ve(g),{isNameEditing:n,newListName:C,moveItem:w,swapItems:r,addItem:L,goToAddInput:_,updateListName:b}=Ee(g);return(N,m)=>{const Q=B("VLoading"),X=B("RouterLink");return a(),o("div",Me,[e.list?(a(),o("div",ze,[t("div",Be,[I(t("div",Fe,[t("p",null,[I(t("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=d=>V(C)?C.value=d:null),placeholder:"Введите новое имя списка",class:"list__edit-name-input",onKeyup:m[1]||(m[1]=ee((...d)=>s(b)&&s(b)(...d),["enter"]))},null,544),[[H,s(C)]])]),t("button",{class:"btn",onClick:m[2]||(m[2]=(...d)=>s(b)&&s(b)(...d))},"Сохранить")],512),[[S,s(n)]]),I(t("div",Pe,[t("span",{class:"icon-edit",onClick:m[3]||(m[3]=d=>n.value=!0)}),t("span",null,k(e.name),1)],512),[[S,!s(n)]])]),e.list.listItems.length>10?(a(),o("div",{key:0,class:"list__goto-add",onClick:m[4]||(m[4]=(...d)=>s(_)&&s(_)(...d))},je)):$("",!0),e.list.listItems.length?(a(),o("div",Ke,[U(te,{name:"list-anim"},{default:E(()=>[(a(!0),o(M,null,z(e.list.listItems,(d,T)=>(a(),F(Te,{key:d.id,"is-last":T===e.list.listItems.length-1,index:T,"list-item":d,onDeleteItem:m[5]||(m[5]=J=>s(i).removeItemFromList(e.name,J)),onSwap:s(r),onMoveItem:s(w)},null,8,["is-last","index","list-item","onSwap","onMoveItem"]))),128))]),_:1})])):(a(),o("div",qe," В списке пока нет элементов , исправьте это ! ")),t("form",{onSubmit:m[8]||(m[8]=se(()=>{},["prevent"])),class:"list__add-form add-form"},[t("div",Ge,[I(t("span",{class:"icon-close",onClick:m[6]||(m[6]=d=>c.value="")},null,512),[[S,s(c).length]]),I(t("input",{"onUpdate:modelValue":m[7]||(m[7]=d=>V(c)?c.value=d:null),placeholder:s(y).placeholderHint,type:"text"},null,8,Qe),[[H,s(c)]])]),I(t("div",Xe,[I(t("div",Je,[U(Q,{message:s(y).searchHint+s(c)+"..."},null,8,["message"])],512),[[S,s(u)]]),s(p)?(a(),o("div",Oe," Произошла ошибка + "+k(s(f)),1)):$("",!0),s(v).length?(a(),o("div",We,[(a(!0),o(M,null,z(s(v),d=>(a(),F(ve,{key:d.title,item:d,onAddItem:s(L)},null,8,["item","onAddItem"]))),128))])):!s(u)&&!s(p)&&!s(l)?(a(),o("div",Ye," Не удалось найти ничего похожего на "+k(s(c))+". Попробуйте начти что-нибудь другое ",1)):$("",!0)],512),[[S,s(c).length>0]])],32)])):(a(),o("div",Ze,[et,t("p",null,[U(X,{to:{name:"all-lists"},class:"btn"},{default:E(()=>[R("На страницу списков ")]),_:1})])]))])}}});const lt=A(tt,[["__scopeId","data-v-1752869f"]]);export{lt as U};
