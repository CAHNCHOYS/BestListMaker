import{d as w,o as i,c as l,a as t,t as h,l as k,_ as b,h as $,x as D,y as E,u as r,j as g,k as p,e as B,v as M,p as A,f as F,i as j,b as C,w as z,z as P,A as q,F as U,r as H,m as G,g as R,B as V}from"./index-66f84073.js";import{_ as J,u as K}from"./NoImage-37325e03.js";const O={class:"search-item"},Q={class:"search-item__row"},W={class:"search-item__picture"},X=["src","alt"],Y={key:1,src:J,alt:"No picture"},Z={class:"search-item__info"},ee={class:"search-item__title"},te={key:0,class:"search-item__date"},se={key:1,class:"search-item__description"},ie={class:"search-item__add-btn"},le=w({__name:"SearchListItem",props:{item:null},emits:["addItem"],setup(e,{emit:n}){return(m,d)=>(i(),l("div",O,[t("div",Q,[t("div",W,[e.item.image?(i(),l("img",{key:0,src:e.item.image,alt:e.item.image},null,8,X)):(i(),l("img",Y))]),t("div",Z,[t("div",ee,h(e.item.title),1),e.item.creationDate?(i(),l("div",te," Дата выпуска - "+h(e.item.creationDate),1)):k("",!0),e.item.description?(i(),l("div",se,h(e.item.description),1)):k("",!0)]),t("div",ie,[t("button",{class:"btn",onClick:d[0]||(d[0]=a=>m.$emit("addItem",e.item))}," Добавить ")])])]))}});const ne=b(le,[["__scopeId","data-v-0ec4c764"]]),ae=e=>(A("data-v-83db47f4"),e=e(),F(),e),oe={class:"list-item"},ce={class:"list-item__row"},re={class:"list-item__arrows"},de={class:"list-item__picture"},me=["src","alt"],ue={class:"list-item__info"},_e={class:"list-item__name"},he={key:0,class:"list-item__date"},ve={key:1,class:"list-item__desc"},Ie={class:"list-item__all-actions"},fe={class:"list-item__actions-list"},ge={class:"list-item__comment"},ke={class:"list-item__create-comment"},ye=ae(()=>t("p",null," Оставьте ваш комментарий здесь: ",-1)),$e=w({__name:"UserListItem",props:{listItem:null,index:null,isLast:{type:Boolean}},emits:["deleteItem","shuffle"],setup(e,{emit:n}){const m=e,d=$(!1),a=D(()=>({gold:m.index===0,silver:m.index===1,cuprum:m.index===2}));return(v,s)=>(i(),l("div",oe,[t("div",ce,[t("div",{class:E(["list-item__index",r(a)])},[t("span",null,h(e.index+1),1)],2),t("div",re,[e.index!=0?(i(),l("div",{key:0,onClick:s[0]||(s[0]=_=>v.$emit("shuffle",{type:"up",currentIndex:e.index})),class:"list-item__arrow icon-arrow-up"})):k("",!0),e.isLast?k("",!0):(i(),l("div",{key:1,class:"list-item__arrow icon-arrow-down",onClick:s[1]||(s[1]=_=>v.$emit("shuffle",{type:"down",currentIndex:e.index}))}))]),t("div",de,[t("img",{src:e.listItem.image,alt:e.listItem.image},null,8,me)]),t("div",ue,[t("div",_e,h(e.listItem.title),1),e.listItem.creationDate?(i(),l("div",he," Дата выпуска - "+h(e.listItem.creationDate),1)):k("",!0),e.listItem.description?(i(),l("div",ve,h(e.listItem.description),1)):k("",!0)]),t("div",Ie,[t("ul",fe,[t("li",null,[t("span",{class:"list-item__action icon-comment",onClick:s[2]||(s[2]=_=>d.value=!d.value)})]),t("li",null,[t("span",{class:"list-item__action icon-trash-can",onClick:s[3]||(s[3]=_=>v.$emit("deleteItem",e.index))})])])])]),g(t("div",ge,[t("span",null,h(e.listItem.userComment),1)],512),[[p,e.listItem.userComment&&!d.value]]),g(t("div",ke,[ye,B(),g(t("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=_=>e.listItem.userComment=_),onBlur:s[5]||(s[5]=_=>d.value=!1)},null,544),[[M,e.listItem.userComment]])],512),[[p,d.value]])]))}});const xe=b($e,[["__scopeId","data-v-83db47f4"]]),pe=e=>{const n=$(""),m=$(!1),d=$([]),a=$(!1),v=$("error"),s=$({placeholderHint:"Введите название и уберите фокус или нажмите enter",searchHint:""}),_=D(()=>{var y;let x=(y=e.list)==null?void 0:y.category,u={link:"",options:{}};switch(x){case"Фильмы":u.link="https://imdb-api.com/en/API/SearchMovie/k_8y8soghm/",s.value.placeholderHint="Введите название фильма",s.value.searchHint="Ищем фильм ";break;case"Сериалы":u.link="https://imdb-api.com/en/API/SearchSeries/k_8y8soghm/",s.value.placeholderHint="Введите название сериала",s.value.searchHint="Ищем сериал ";break;case"Игры":u.link="https://www.speedrun.com/api/v1/games?name=",s.value.placeholderHint="Введите название игры",s.value.searchHint="Ищем игру ";break;case"Актеры":u.link="https://imdb-api.com/en/API/SearchName/k_8y8soghm/",s.value.placeholderHint="Введите имя актера",s.value.searchHint="Ищем актера ";break}return u});return j(n,async()=>{if(d.value=[],n.value.length!==0){m.value=!0;try{let u=await(await fetch(_.value.link+n.value,_.value.options)).json();if(u.errorMessage){v.value=u.errorMessage,a.value=!0,m.value=!1,setTimeout(()=>a.value=!1,3500);return}console.log(u);const y=u.results||u.data||[];y.length&&(d.value=y.map(I=>{var o,c;return{id:I.id,title:I.title||((o=I.names)==null?void 0:o.international),image:I.image||((c=I.assets)==null?void 0:c["cover-large"].uri),creationDate:I["release-date"],description:I.description,userComment:""}}))}catch(x){console.log(x),a.value=!0}finally{m.value=!1}}}),{isSearching:m,searchElement:n,searchItems:d,hintsForUser:s,errorMessage:v,isError:a}},we=e=>(A("data-v-a5fcdb5a"),e=e(),F(),e),be={class:"list"},Le={class:"list__name"},Se=we(()=>t("button",{class:"btn"},"Перейти к добавлению элементов",-1)),Ce=[Se],Ue={key:0,class:"list__list-items"},He={key:1,class:"list__no-items"},Ve={class:"list__no-list"},De={class:"add-form__input"},Be=["placeholder"],Me={class:"add-form__search-elements search-elems"},Ae={class:"search-elems__searching"},Fe={key:0,class:"search-elems__error"},Ne={key:1,class:"search-elems__all-elems"},Te={key:2,class:"search-elems__no-items"},Ee=w({__name:"UserList",props:{name:null,list:null},setup(e){const n=e,m=K(),{isSearching:d,searchElement:a,searchItems:v,hintsForUser:s,isError:_,errorMessage:x}=pe(n),u=o=>{m.addItemToList(n.name,o)},y=o=>{console.log(o);let c=null;o.type==="up"?(c=n.list.listItems[o.currentIndex-1],n.list.listItems[o.currentIndex-1]=n.list.listItems[o.currentIndex],n.list.listItems[o.currentIndex]=c):(c=n.list.listItems[o.currentIndex+1],n.list.listItems[o.currentIndex+1]=n.list.listItems[o.currentIndex],n.list.listItems[o.currentIndex]=c),m.saveListsInStorage()},I=()=>{document.querySelector(".add-form").scrollIntoView({behavior:"smooth",block:"start"})};return(o,c)=>{var L;const N=R("VLoading");return i(),l("div",be,[t("div",Le,[B(" Список - "),t("span",null,h(e.name),1)]),t("div",{class:"list__goto-add",onClick:I},Ce),(L=e.list)!=null&&L.listItems.length?(i(),l("div",Ue,[C(P,{name:"list-anim"},{default:z(()=>[(i(!0),l(U,null,H(e.list.listItems,(f,S)=>(i(),V(xe,{"is-last":S===e.list.listItems.length-1,key:f.id,index:S,"list-item":f,onDeleteItem:c[0]||(c[0]=T=>r(m).removeItemFromList(e.name,T)),onShuffle:y},null,8,["is-last","index","list-item"]))),128))]),_:1})])):(i(),l("div",He," Ваш список пока пуст, добавьте что-нибудь в него :) ")),g(t("div",Ve," Не удалось найти список с таким названием :( ",512),[[p,!e.list]]),t("form",{onSubmit:c[3]||(c[3]=G(()=>{},["prevent"])),class:"list__add-form add-form"},[t("div",De,[g(t("span",{class:"icon-close",onClick:c[1]||(c[1]=f=>a.value="")},null,512),[[p,r(a).length]]),g(t("input",{"onUpdate:modelValue":c[2]||(c[2]=f=>q(a)?a.value=f:null),placeholder:r(s).placeholderHint,type:"text"},null,8,Be),[[M,r(a),void 0,{lazy:!0}]])]),g(t("div",Me,[g(t("div",Ae,[C(N,{message:r(s).searchHint+r(a)+"..."},null,8,["message"])],512),[[p,r(d)]]),r(_)?(i(),l("div",Fe," Произошла ошибка + "+h(r(x)),1)):k("",!0),r(v).length?(i(),l("div",Ne,[(i(!0),l(U,null,H(r(v),f=>(i(),V(ne,{key:f.title,item:f,onAddItem:u},null,8,["item"]))),128))])):!r(d)&&!r(_)?(i(),l("div",Te," Не удалось найти ничего похожего на "+h(r(a))+". Попробуйте начти что-нибудь другое ",1)):k("",!0)],512),[[p,r(a).length>0]])],32)])}}});const Pe=b(Ee,[["__scopeId","data-v-a5fcdb5a"]]);export{Pe as U};
