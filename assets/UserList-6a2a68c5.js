import{d as A,h,o as l,c as o,a as t,t as k,m as w,e as C,w as x,j as I,k as b,T as E,_ as D,i as J,s as R,x as O,u as a,v as N,p as j,g as K,y as W,z as Y,r as M,A as z,B as Z,F as B,b as F,C as ee,l as te,f as se,D as P}from"./index-f62b5717.js";import{u as T,_ as q}from"./NoImage-d4cd0d55.js";const ie={class:"search-item"},ae={class:"search-item__row"},le={class:"search-item__picture list-item-image"},ne=["src","alt"],oe={key:1,src:q,alt:"No picture"},ce={class:"search-item__info"},re={class:"search-item__title"},me={key:0,class:"search-item__date"},de={key:1,class:"search-item__description"},ue={class:"search-item__add-btn"},_e={class:"search-item__action-message search-item__action-message_success"},ve={class:"search-item__action-message search-item__action-message_err"},he=A({__name:"SearchListItem",props:{item:null,listName:null},setup(e){const p=e,{addItemToList:s}=T(),u=h(!1),c=h(!1),g=()=>{s(p.listName,p.item).isAdded?(u.value=!0,setTimeout(()=>u.value=!1,1500)):(c.value=!0,setTimeout(()=>c.value=!1,1500))};return(y,f)=>(l(),o("div",ie,[t("div",ae,[t("div",le,[e.item.image?(l(),o("img",{key:0,src:e.item.image,alt:e.item.image},null,8,ne)):(l(),o("img",oe))]),t("div",ce,[t("div",re,k(e.item.title),1),e.item.creationDate?(l(),o("div",me," Дата выпуска - "+k(e.item.creationDate),1)):w("",!0),e.item.description?(l(),o("div",de,k(e.item.description),1)):w("",!0)]),t("div",ue,[t("button",{class:"btn",onClick:g},"Добавить"),C(E,{name:"message"},{default:x(()=>[I(t("p",_e," Элемент добавлен в список ",512),[[b,u.value]])]),_:1}),C(E,{name:"message"},{default:x(()=>[I(t("p",ve," Такой элемент уже есть в списке! ",512),[[b,c.value]])]),_:1})])])]))}});const Ie=D(he,[["__scopeId","data-v-f8160d08"]]),ge=e=>(j("data-v-480976bd"),e=e(),K(),e),ke={class:"list-item"},pe={class:"list-item__row"},ye={key:0},fe={key:1},$e={class:"list-item__arrows"},be={class:"list-item__picture list-item-image"},we=["src","alt"],Le={key:1,src:q,alt:"No picture"},Se={class:"list-item__info"},Ce={class:"list-item__name"},He={key:0,class:"list-item__date"},xe={key:1,class:"list-item__desc"},Ne={class:"list-item__all-actions"},Te={class:"list-item__actions-list"},Ue={class:"list-item__comment"},Ae={class:"list-item__create-comment"},De=ge(()=>t("p",null,"Ваш комментарий:",-1)),Ve=A({__name:"UserListItem",props:{listItem:null,index:null,isLast:{type:Boolean}},emits:["deleteItem","swap","moveItem"],setup(e,{emit:p}){const s=e;J(()=>s.index,()=>{g.value=s.index+1});const u=T(),c=h(!1),g=h(s.index+1),y=()=>{c.value=!1,p("moveItem",g.value-1,s.index),u.saveListsInStorage()},f=R(()=>({gold:s.index===0,silver:s.index===1,cuprum:s.index===2}));return(_,n)=>(l(),o("div",ke,[t("div",pe,[t("div",{class:O(["list-item__index",[a(f),c.value?"edit":""]])},[c.value?(l(),o("span",fe,[I(t("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=i=>g.value=i),tabindex:"0"},null,512),[[N,g.value,void 0,{number:!0}]])])):(l(),o("span",ye,k(e.index+1),1))],2),t("div",$e,[e.index!=0?(l(),o("div",{key:0,onClick:n[1]||(n[1]=i=>_.$emit("swap","up",e.index)),class:"list-item__arrow icon-arrow-up"})):w("",!0),e.isLast?w("",!0):(l(),o("div",{key:1,class:"list-item__arrow icon-arrow-down",onClick:n[2]||(n[2]=i=>_.$emit("swap","down",e.index))}))]),t("div",be,[e.listItem.image?(l(),o("img",{key:0,src:e.listItem.image,alt:e.listItem.image},null,8,we)):(l(),o("img",Le))]),t("div",Se,[t("div",Ce,k(e.listItem.title),1),e.listItem.creationDate?(l(),o("div",He," Дата выпуска - "+k(e.listItem.creationDate),1)):w("",!0),e.listItem.description?(l(),o("div",xe,k(e.listItem.description),1)):w("",!0)]),t("div",Ne,[t("ul",Te,[t("li",null,[t("span",{class:"list-item__action icon-edit",onClick:n[3]||(n[3]=i=>c.value=!c.value)})]),t("li",null,[t("span",{class:"list-item__action icon-trash-can",onClick:n[4]||(n[4]=i=>_.$emit("deleteItem",e.index))})])])])]),I(t("div",Ue,[t("span",null,k(e.listItem.userComment),1)],512),[[b,e.listItem.userComment&&!c.value]]),I(t("div",Ae,[De,I(t("input",{type:"text","onUpdate:modelValue":n[5]||(n[5]=i=>e.listItem.userComment=i),tabindex:"1"},null,512),[[N,e.listItem.userComment]]),t("button",{class:"btn",onClick:y},"Сохранить")],512),[[b,c.value]])]))}});const Ee=D(Ve,[["__scopeId","data-v-480976bd"]]),Me=e=>{var S;const s=h({placeholderHint:`Введите название ${{Фильмы:"фильма",Сериалы:"сериала",Игры:"игры",Актеры:"актера",Музыка:"трека",Коктейли:"Коктейля на английском","Серия сериала":"серии"}[(S=e.list)==null?void 0:S.category]}`,searchHint:""}),u=h(""),c=h([]),g=h(""),y=h(!1),f=h(!1),_=h(!1),n=R(()=>{var L;let $=(L=e.list)==null?void 0:L.category,r={link:"",options:{}};switch($){case"Фильмы":r.link="https://imdb-api.com/en/API/SearchMovie/k_8y8soghm/",s.value.placeholderHint="Введите название фильма",s.value.searchHint="Ищем фильм ";break;case"Сериалы":r.link="https://imdb-api.com/en/API/SearchSeries/k_8y8soghm/",s.value.placeholderHint="Введите название сериала",s.value.searchHint="Ищем сериал ";break;case"Серия сериала":r.link="https://imdb-api.com/en/API/SearchEpisode/k_8y8soghm/",s.value.placeholderHint="Введите название серии",s.value.searchHint="Ищем серию ";break;case"Музыка":r.link="https://deezerdevs-deezer.p.rapidapi.com/search?q=",r.options={method:"GET",headers:{"X-RapidAPI-Key":"9e3411aeb2msh6870cf46972558cp1475c4jsn93502557ec77","X-RapidAPI-Host":"deezerdevs-deezer.p.rapidapi.com"}},s.value.placeholderHint="Введите название трека или исполнителя",s.value.searchHint="Ищем трек ";break;case"Игры":r.link="https://www.speedrun.com/api/v1/games?name=",s.value.placeholderHint="Введите название игры",s.value.searchHint="Ищем игру ";break;case"Актеры":r.link="https://imdb-api.com/en/API/SearchName/k_8y8soghm/",s.value.placeholderHint="Введите имя актера",s.value.searchHint="Ищем актера ";break;case"Коктейли":r.link="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=",s.value.placeholderHint="Введите название коктейля (на англ)",s.value.searchHint="Ищем коктейль ";break}return r}),i=async()=>{_.value=!0;try{let r=await(await fetch(n.value.link+u.value,n.value.options)).json();if(console.log(r),!r.errorMessage&&!r.error){const L=r.results||r.data||r.drinks||[];L.length&&(c.value=L.map(v=>{var U,m,H;return{id:v.id||v.idDrink,title:v.title||((U=v.names)==null?void 0:U.international)||v.strDrink,image:v.image||((m=v.assets)==null?void 0:m["cover-large"].uri)||((H=v.album)==null?void 0:H.cover)||v.strDrinkThumb,creationDate:v["release-date"],description:v.description,userComment:""}}))}else g.value=r.errorMessage||r.error,y.value=!0}catch($){console.log($),y.value=!0}finally{_.value=!1,f.value=!1}};return W($=>{if(c.value=[],u.value.length===0)return;f.value=!0,y.value=!1;let r=setTimeout(i,850);$(()=>{clearInterval(r)})}),{isSearching:_,searchQuery:u,searchItems:c,hintsForUser:s,errorMessage:g,isError:y,isTyping:f}},ze=e=>{const p=Y(),s=T(),u=h(!1),c=h(e.name);return{goToAddInput:()=>{document.querySelector(".add-form").scrollIntoView({behavior:"smooth",block:"start"})},swapItems:(n,i)=>{n==="up"?[e.list.listItems[i-1],e.list.listItems[i]]=[e.list.listItems[i],e.list.listItems[i-1]]:[e.list.listItems[i+1],e.list.listItems[i]]=[e.list.listItems[i],e.list.listItems[i+1]],s.saveListsInStorage()},updateListName:()=>{s.updateListName(e.name,c.value),u.value=!1,p.push({name:"single-list",params:{name:c.value}})},moveItem:(n,i)=>{n<0||n>=e.list.listItems.length||([e.list.listItems[n],e.list.listItems[i]]=[e.list.listItems[i],e.list.listItems[n]])},isNameEditing:u,newListName:c}},G=e=>(j("data-v-ebcad074"),e=e(),K(),e),Be={class:"list"},Fe={key:0,class:"list__body"},Pe={class:"list__name"},Re={class:"list__name-edit"},je={class:"list__current-name"},Ke=G(()=>t("button",{class:"btn"},"Перейти к добавлению элементов",-1)),qe=[Ke],Ge={key:1,class:"list__list-items"},Qe={key:2,class:"list__no-items"},Xe={class:"add-form__input"},Je=["placeholder"],Oe={class:"add-form__search-elements search-elems"},We={class:"search-elems__searching"},Ye={key:0,class:"search-elems__error"},Ze={key:1,class:"search-elems__all-elems"},et={key:2,class:"search-elems__no-items"},tt={key:1,class:"list__no-list"},st=G(()=>t("p",null,"Не удалось найти список с таким названием :(",-1)),it=A({__name:"UserList",props:{name:null,list:null},setup(e){const p=e,s=T(),{isNameEditing:u,newListName:c,moveItem:g,swapItems:y,goToAddInput:f,updateListName:_}=ze(p),{isSearching:n,searchQuery:i,searchItems:S,hintsForUser:$,isError:r,errorMessage:L,isTyping:v}=Me(p);return(U,m)=>{const H=M("VLoading"),Q=M("RouterLink");return l(),o("div",Be,[e.list?(l(),o("div",Fe,[t("div",Pe,[I(t("div",Re,[t("p",null,[I(t("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=d=>z(c)?c.value=d:null),placeholder:"Введите новое имя списка",class:"list__edit-name-input",onKeyup:m[1]||(m[1]=Z((...d)=>a(_)&&a(_)(...d),["enter"]))},null,544),[[N,a(c)]])]),t("button",{class:"btn",onClick:m[2]||(m[2]=(...d)=>a(_)&&a(_)(...d))},"Сохранить")],512),[[b,a(u)]]),I(t("div",je,[t("span",{class:"icon-edit",onClick:m[3]||(m[3]=d=>u.value=!0)}),t("span",null,k(e.name),1)],512),[[b,!a(u)]])]),e.list.listItems.length>10?(l(),o("div",{key:0,class:"list__goto-add",onClick:m[4]||(m[4]=(...d)=>a(f)&&a(f)(...d))},qe)):w("",!0),e.list.listItems.length?(l(),o("div",Ge,[C(ee,{name:"list-anim"},{default:x(()=>[(l(!0),o(B,null,F(e.list.listItems,(d,V)=>(l(),P(Ee,{key:d.id,"is-last":V===e.list.listItems.length-1,index:V,"list-item":d,onDeleteItem:m[5]||(m[5]=X=>a(s).removeItemFromList(e.name,X)),onSwap:a(y),onMoveItem:a(g)},null,8,["is-last","index","list-item","onSwap","onMoveItem"]))),128))]),_:1})])):(l(),o("div",Qe," В списке пока нет элементов , исправьте это ! ")),t("form",{onSubmit:m[8]||(m[8]=te(()=>{},["prevent"])),class:"list__add-form add-form"},[t("div",Xe,[I(t("span",{class:"icon-close",onClick:m[6]||(m[6]=d=>i.value="")},null,512),[[b,a(i).length]]),I(t("input",{"onUpdate:modelValue":m[7]||(m[7]=d=>z(i)?i.value=d:null),placeholder:a($).placeholderHint,type:"text"},null,8,Je),[[N,a(i)]])]),I(t("div",Oe,[I(t("div",We,[C(H,{message:a($).searchHint+a(i)+"..."},null,8,["message"])],512),[[b,a(n)]]),a(r)?(l(),o("div",Ye," Произошла ошибка + "+k(a(L)),1)):a(S).length?(l(),o("div",Ze,[(l(!0),o(B,null,F(a(S),d=>(l(),P(Ie,{"list-name":e.name,key:d.title,item:d},null,8,["list-name","item"]))),128))])):!a(n)&&!a(v)?(l(),o("div",et," Не удалось найти ничего похожего на "+k(a(i))+". Попробуйте начти что-нибудь другое ",1)):w("",!0)],512),[[b,a(i).length>0]])],32)])):(l(),o("div",tt,[st,t("p",null,[C(Q,{to:{name:"all-lists"},class:"btn"},{default:x(()=>[se("На страницу списков ")]),_:1})])]))])}}});const nt=D(it,[["__scopeId","data-v-ebcad074"]]);export{nt as U};
