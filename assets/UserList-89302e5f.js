import{d as A,i as T,h,o as l,c as o,a as t,t as k,n as w,e as C,w as x,k as I,l as b,T as E,_ as D,j as J,q as R,s as O,u as a,v as N,p as j,g as q,x as W,y as Y,r as M,z,A as Z,F as B,b as F,B as ee,m as te,f as se,C as P}from"./index-ab018db0.js";import{_ as K}from"./NoImage-da54b66b.js";const ie={class:"search-item"},ae={class:"search-item__row"},le={class:"search-item__picture list-item-image"},ne=["src","alt"],oe={key:1,src:K,alt:"No picture"},ce={class:"search-item__info"},me={class:"search-item__title"},re={key:0,class:"search-item__date"},de={key:1,class:"search-item__description"},ue={class:"search-item__add-btn"},_e={class:"search-item__action-message search-item__action-message_success"},ve={class:"search-item__action-message search-item__action-message_err"},he=A({__name:"SearchListItem",props:{item:null,listName:null},setup(e){const f=e,{addItemToList:i}=T(),u=h(!1),c=h(!1),g=()=>{i(f.listName,f.item).isAdded?(u.value=!0,setTimeout(()=>u.value=!1,1500)):(c.value=!0,setTimeout(()=>c.value=!1,1500))};return(p,y)=>(l(),o("div",ie,[t("div",ae,[t("div",le,[e.item.image?(l(),o("img",{key:0,src:e.item.image,alt:e.item.image},null,8,ne)):(l(),o("img",oe))]),t("div",ce,[t("div",me,k(e.item.title),1),e.item.creationDate?(l(),o("div",re," Дата выпуска - "+k(e.item.creationDate),1)):w("",!0),e.item.description?(l(),o("div",de,k(e.item.description),1)):w("",!0)]),t("div",ue,[t("button",{class:"btn",onClick:g},"Добавить"),C(E,{name:"message"},{default:x(()=>[I(t("p",_e," Элемент добавлен в список ",512),[[b,u.value]])]),_:1}),C(E,{name:"message"},{default:x(()=>[I(t("p",ve," Такой элемент уже есть в списке! ",512),[[b,c.value]])]),_:1})])])]))}});const Ie=D(he,[["__scopeId","data-v-b7306f14"]]),ge=e=>(j("data-v-ff62ae9e"),e=e(),q(),e),ke={class:"list-item"},fe={class:"list-item__row"},pe={key:0},ye={key:1},$e={class:"list-item__arrows"},be={class:"list-item__picture list-item-image"},we=["src","alt"],Le={key:1,src:K,alt:"No picture"},Se={class:"list-item__info"},Ce={class:"list-item__name"},He={key:0,class:"list-item__date"},xe={key:1,class:"list-item__desc"},Ne={class:"list-item__all-actions"},Te={class:"list-item__actions-list"},Ue={class:"list-item__comment"},Ae={class:"list-item__create-comment"},De=ge(()=>t("p",null,"Ваш комментарий:",-1)),Ve=A({__name:"UserListItem",props:{listItem:null,index:null,isLast:{type:Boolean}},emits:["deleteItem","swap","moveItem"],setup(e,{emit:f}){const i=e;J(()=>i.index,()=>{g.value=i.index+1});const u=T(),c=h(!1),g=h(i.index+1),p=()=>{c.value=!1,f("moveItem",g.value-1,i.index),u.saveListsInStorage()},y=R(()=>({gold:i.index===0,silver:i.index===1,cuprum:i.index===2}));return(_,n)=>(l(),o("div",ke,[t("div",fe,[t("div",{class:O(["list-item__index",[a(y),c.value?"edit":""]])},[c.value?(l(),o("span",ye,[I(t("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=s=>g.value=s),tabindex:"0"},null,512),[[N,g.value,void 0,{number:!0}]])])):(l(),o("span",pe,k(e.index+1),1))],2),t("div",$e,[e.index!=0?(l(),o("div",{key:0,onClick:n[1]||(n[1]=s=>_.$emit("swap","up",e.index)),class:"list-item__arrow icon-arrow-up"})):w("",!0),e.isLast?w("",!0):(l(),o("div",{key:1,class:"list-item__arrow icon-arrow-down",onClick:n[2]||(n[2]=s=>_.$emit("swap","down",e.index))}))]),t("div",be,[e.listItem.image?(l(),o("img",{key:0,src:e.listItem.image,alt:e.listItem.image},null,8,we)):(l(),o("img",Le))]),t("div",Se,[t("div",Ce,k(e.listItem.title),1),e.listItem.creationDate?(l(),o("div",He," Дата выпуска - "+k(e.listItem.creationDate),1)):w("",!0),e.listItem.description?(l(),o("div",xe,k(e.listItem.description),1)):w("",!0)]),t("div",Ne,[t("ul",Te,[t("li",null,[t("span",{class:"list-item__action icon-edit",onClick:n[3]||(n[3]=s=>c.value=!c.value)})]),t("li",null,[t("span",{class:"list-item__action icon-trash-can",onClick:n[4]||(n[4]=s=>_.$emit("deleteItem",e.index))})])])])]),I(t("div",Ue,[t("span",null,k(e.listItem.userComment),1)],512),[[b,e.listItem.userComment&&!c.value]]),I(t("div",Ae,[De,I(t("input",{type:"text","onUpdate:modelValue":n[5]||(n[5]=s=>e.listItem.userComment=s),tabindex:"1"},null,512),[[N,e.listItem.userComment]]),t("button",{class:"btn",onClick:p},"Сохранить")],512),[[b,c.value]])]))}});const Ee=D(Ve,[["__scopeId","data-v-ff62ae9e"]]),Me=e=>{var S;const i=h({placeholderHint:`Введите название ${{Фильмы:"фильма",Сериалы:"сериала",Игры:"игры",Актеры:"актера",Музыка:"трека",Коктейли:"Коктейля на английском","Серия сериала":"серии"}[(S=e.list)==null?void 0:S.category]}`,searchHint:""}),u=h(""),c=h([]),g=h(""),p=h(!1),y=h(!1),_=h(!1),n=R(()=>{var L;let $=(L=e.list)==null?void 0:L.category,m={link:"",options:{}};switch($){case"Фильмы":m.link="https://imdb-api.com/en/API/SearchMovie/k_8y8soghm/",i.value.placeholderHint="Введите название фильма",i.value.searchHint="Ищем фильм ";break;case"Сериалы":m.link="https://imdb-api.com/en/API/SearchSeries/k_8y8soghm/",i.value.placeholderHint="Введите название сериала",i.value.searchHint="Ищем сериал ";break;case"Серия сериала":m.link="https://imdb-api.com/en/API/SearchEpisode/k_8y8soghm/",i.value.placeholderHint="Введите название серии",i.value.searchHint="Ищем серию ";break;case"Музыка":m.link="https://deezerdevs-deezer.p.rapidapi.com/search?q=",m.options={method:"GET",headers:{"X-RapidAPI-Key":"9e3411aeb2msh6870cf46972558cp1475c4jsn93502557ec77","X-RapidAPI-Host":"deezerdevs-deezer.p.rapidapi.com"}};break;case"Игры":m.link="https://www.speedrun.com/api/v1/games?name=",i.value.placeholderHint="Введите название игры",i.value.searchHint="Ищем игру ";break;case"Актеры":m.link="https://imdb-api.com/en/API/SearchName/k_8y8soghm/",i.value.placeholderHint="Введите имя актера",i.value.searchHint="Ищем актера ";break;case"Коктейли":m.link="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=",i.value.placeholderHint="Введите название коктейля (на англ)",i.value.searchHint="Ищем коктейль ";break}return m}),s=async()=>{_.value=!0;try{let m=await(await fetch(n.value.link+u.value,n.value.options)).json();if(console.log(m),!m.errorMessage&&!m.error){const L=m.results||m.data||m.drinks||[];L.length&&(c.value=L.map(v=>{var U,r,H;return{id:v.id||v.idDrink,title:v.title||((U=v.names)==null?void 0:U.international)||v.strDrink,image:v.image||((r=v.assets)==null?void 0:r["cover-large"].uri)||((H=v.album)==null?void 0:H.cover)||v.strDrinkThumb,creationDate:v["release-date"],description:v.description,userComment:""}}))}else g.value=m.errorMessage||m.error,p.value=!0}catch($){console.log($),p.value=!0}finally{_.value=!1,y.value=!1}};return W($=>{if(c.value=[],u.value.length===0)return;y.value=!0,p.value=!1;let m=setTimeout(s,850);$(()=>{clearInterval(m)})}),{isSearching:_,searchQuery:u,searchItems:c,hintsForUser:i,errorMessage:g,isError:p,isTyping:y}},ze=e=>{const f=Y(),i=T(),u=h(!1),c=h(e.name);return{goToAddInput:()=>{document.querySelector(".add-form").scrollIntoView({behavior:"smooth",block:"start"})},swapItems:(n,s)=>{n==="up"?[e.list.listItems[s-1],e.list.listItems[s]]=[e.list.listItems[s],e.list.listItems[s-1]]:[e.list.listItems[s+1],e.list.listItems[s]]=[e.list.listItems[s],e.list.listItems[s+1]],i.saveListsInStorage()},updateListName:()=>{i.updateListName(e.name,c.value),u.value=!1,f.push({name:"single-list",params:{name:c.value}})},moveItem:(n,s)=>{n<0||n>=e.list.listItems.length||([e.list.listItems[n],e.list.listItems[s]]=[e.list.listItems[s],e.list.listItems[n]])},isNameEditing:u,newListName:c}},G=e=>(j("data-v-456ebc9f"),e=e(),q(),e),Be={class:"list"},Fe={key:0,class:"list__body"},Pe={class:"list__name"},Re={class:"list__name-edit"},je={class:"list__current-name"},qe=G(()=>t("button",{class:"btn"},"Перейти к добавлению элементов",-1)),Ke=[qe],Ge={key:1,class:"list__list-items"},Qe={key:2,class:"list__no-items"},Xe={class:"add-form__input"},Je=["placeholder"],Oe={class:"add-form__search-elements search-elems"},We={class:"search-elems__searching"},Ye={key:0,class:"search-elems__error"},Ze={key:1,class:"search-elems__all-elems"},et={key:2,class:"search-elems__no-items"},tt={key:1,class:"list__no-list"},st=G(()=>t("p",null,"Не удалось найти список с таким названием :(",-1)),it=A({__name:"UserList",props:{name:null,list:null},setup(e){const f=e,i=T(),{isNameEditing:u,newListName:c,moveItem:g,swapItems:p,goToAddInput:y,updateListName:_}=ze(f),{isSearching:n,searchQuery:s,searchItems:S,hintsForUser:$,isError:m,errorMessage:L,isTyping:v}=Me(f);return(U,r)=>{const H=M("VLoading"),Q=M("RouterLink");return l(),o("div",Be,[e.list?(l(),o("div",Fe,[t("div",Pe,[I(t("div",Re,[t("p",null,[I(t("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=d=>z(c)?c.value=d:null),placeholder:"Введите новое имя списка",class:"list__edit-name-input",onKeyup:r[1]||(r[1]=Z((...d)=>a(_)&&a(_)(...d),["enter"]))},null,544),[[N,a(c)]])]),t("button",{class:"btn",onClick:r[2]||(r[2]=(...d)=>a(_)&&a(_)(...d))},"Сохранить")],512),[[b,a(u)]]),I(t("div",je,[t("span",{class:"icon-edit",onClick:r[3]||(r[3]=d=>u.value=!0)}),t("span",null,k(e.name),1)],512),[[b,!a(u)]])]),e.list.listItems.length>10?(l(),o("div",{key:0,class:"list__goto-add",onClick:r[4]||(r[4]=(...d)=>a(y)&&a(y)(...d))},Ke)):w("",!0),e.list.listItems.length?(l(),o("div",Ge,[C(ee,{name:"list-anim"},{default:x(()=>[(l(!0),o(B,null,F(e.list.listItems,(d,V)=>(l(),P(Ee,{key:d.id,"is-last":V===e.list.listItems.length-1,index:V,"list-item":d,onDeleteItem:r[5]||(r[5]=X=>a(i).removeItemFromList(e.name,X)),onSwap:a(p),onMoveItem:a(g)},null,8,["is-last","index","list-item","onSwap","onMoveItem"]))),128))]),_:1})])):(l(),o("div",Qe," В списке пока нет элементов , исправьте это ! ")),t("form",{onSubmit:r[8]||(r[8]=te(()=>{},["prevent"])),class:"list__add-form add-form"},[t("div",Xe,[I(t("span",{class:"icon-close",onClick:r[6]||(r[6]=d=>s.value="")},null,512),[[b,a(s).length]]),I(t("input",{"onUpdate:modelValue":r[7]||(r[7]=d=>z(s)?s.value=d:null),placeholder:a($).placeholderHint,type:"text"},null,8,Je),[[N,a(s)]])]),I(t("div",Oe,[I(t("div",We,[C(H,{message:a($).searchHint+a(s)+"..."},null,8,["message"])],512),[[b,a(n)]]),a(m)?(l(),o("div",Ye," Произошла ошибка + "+k(a(L)),1)):w("",!0),a(S).length?(l(),o("div",Ze,[(l(!0),o(B,null,F(a(S),d=>(l(),P(Ie,{"list-name":e.name,key:d.title,item:d},null,8,["list-name","item"]))),128))])):!a(n)&&!a(m)&&!a(v)?(l(),o("div",et," Не удалось найти ничего похожего на "+k(a(s))+". Попробуйте начти что-нибудь другое ",1)):w("",!0)],512),[[b,a(s).length>0]])],32)])):(l(),o("div",tt,[st,t("p",null,[C(Q,{to:{name:"all-lists"},class:"btn"},{default:x(()=>[se("На страницу списков ")]),_:1})])]))])}}});const nt=D(it,[["__scopeId","data-v-456ebc9f"]]);export{nt as U};
